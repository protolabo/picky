<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet IFT3150 | StepOn</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <header class="page-header">
        <!-- <img class="logo" style="display: block" src="" height="120" alt="" /> -->
    
        <h1 class="page-title">
            Picky <br>
            <span style="font-size: 0.6em; font-weight: 500;">IFT3150 &ndash; Projet informatique</span>
        </h1>
        
        
        <ul class="bare-list project-infos">
            <!-- <li class="info ico ico-supervisor">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M404.7 79.78h-2.8c-7.5.26-15.8 1.73-24.8 4.3-18 5.16-38.4 14.56-59.3 25.78-41.9 22.4-85.8 52-121.5 68.6-26.4 12.4-59.3 20.4-89.8 27.5-30.5 7.1-58.95 13.4-74.36 20.6-7.13 3.4-10.9 6.9-12.71 9.9-1.8 2.9-2.1 5.2-1.44 8.4 1.32 6.4 8.57 15.4 18.49 21.9l3.29 2.1c162.63-2.3 289.43-13.7 387.73-52.6 2.1-17.6 6.7-34.7 16.5-48.5v-.1l.1-.1c24.5-32.2 8.9-72.58-22.4-84.89-5-1.95-10.7-2.91-17-2.93zm21.9 185.12c-44.2 25.1-103.8 37-169.2 41.2-68.7 4.4-143.7.1-213.52-7.8l1.89 14c31.19 3.2 98.53 11.8 172.83 11.5 77.2-.3 159.6-11.3 208.6-46.2-.2-4.1-.4-8.3-.6-12.7zm7.1 30.2c-46.9 31.5-113.8 42.9-179.9 45.8 44.7 39 89.3 55.1 127.3 59.1 45.2 4.8 81.5-8.7 94.8-19.8 13-10.8 17.5-19.5 18.3-26.2.7-6.8-2-13.3-8.2-20.5-11.3-13.4-33.5-26.4-52.3-38.4z"></path></svg>
            </li> -->
            <li class="info supervisor" title="Superviseur: Louis-Edouard LAFONTANT">
                <svg class="ico" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M480 288c0-80.25-49.28-148.92-119.19-177.62L320 192V80a16 16 0 0 0-16-16h-96a16 16 0 0 0-16 16v112l-40.81-81.62C81.28 139.08 32 207.75 32 288v64h448zm16 96H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h480a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"></path></svg>
                <span class="content">Louis-Edouard LAFONTANT</span>
            </li>
            <li class="info team" title="Étudiant: Akram ZNINI">
                <svg class="ico" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"></path></svg>
                <span class="content">Mehdi Lagnaoui</span>
            </li>
        </ul>

        <ul class="bare-list project-links">
            <li class="project-link repo">
                <a class="bare-link" target="_blank" href="https://github.com/protolabo/picky">
                    Code source <img class="ico" src="images/github-mark-white.svg" alt="Logo GitHub">
                </a>
            </li>
            <li class="project-link doc">
                <a class="bare-link disabled" href="#">
                    Rapport <svg class="ico" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M272 41.69V188a4 4 0 0 0 4 4h146.31a2 2 0 0 0 1.42-3.41L275.41 40.27a2 2 0 0 0-3.41 1.42z"></path><path d="M248 224a8 8 0 0 1-8-8V32H92a12 12 0 0 0-12 12v424a12 12 0 0 0 12 12h328a12 12 0 0 0 12-12V224zm104 160H160v-32h192zm0-80H160v-32h192z"></path></svg>
                </a>
            </li>
            <li class="project-link doc">
                <a class="bare-link disabled" href="#">
                    Présentation <svg class="ico" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 256 256" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M216,40H136V24a8,8,0,0,0-16,0V40H40A16,16,0,0,0,24,56V176a16,16,0,0,0,16,16H79.36L57.75,219a8,8,0,0,0,12.5,10l29.59-37h56.32l29.59,37a8,8,0,1,0,12.5-10l-21.61-27H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Z"></path></svg>
                </a>
            </li>
        </ul>
    </header>

    <main class="page-body">
        <header class="content-wrapper">
            <h2>Description du projet</h2>
            
            <p>
                Avec l'évolution du web et l'abondance d'informations disponibles, il est devenu essentiel pour les utilisateurs de pouvoir extraire et traiter des données tabulaires rapidement. Les tableaux intégrés dans les pages web peuvent être affichés de différentes manières : certains sont directement codés en HTML, tandis que d'autres peuvent être intégrés sous forme d'images ou générés dynamiquement par JavaScript. Cette diversité rend l'utilisation d'outils de parsing traditionnels difficile et souvent inefficace.
            </p>

            <p>
                Les utilisateurs se retrouvent souvent à copier manuellement des tableaux à partir de sites web ou à devoir transcrire des données à partir de captures d'écran, ce qui est fastidieux et sujet à des erreurs. Il n'existe pas d'outil accessible et intuitif permettant à la fois d'extraire ces données rapidement et de les personnaliser selon les besoins. De plus, bien que certaines solutions existent pour l'extraction de données tabulaires, elles sont souvent complexes, incomplètes ou limités dans leur flexibilité, rendant l'expérience utilisateur peu agréable.
            </p>		

            <p>
                Picky est une extension de navigateur web conçue pour faciliter l'extraction de données tabulaires. Elle prend en charge la conversion de tableaux (provenant de captures d'écran) présents sur une page web en divers formats d'export, tels que CSV ou JSON. Les données extraites peuvent être filtrées ou modifiées (sans ajout) pour plus de flexibilité et une meilleure interopérabilité avec les clients potentiels. Picky utilise des techniques de traitement d'image et de traitement du langage naturel (NLP) pour améliorer la précision et la qualité des résultats.
            </p>
        </header>

        
        <section class="content-wrapper">
            <h2>Exigences</h2>
            <h3>Besoins fonctionnels:</h3>
                <ul>
                    <li><b>Extraction de tableaux depuis une page web :</b>
                        <ul>
                            <li>L'utilisateur doit pouvoir sélectionner un tableau à partir de l'interface de la page web pour l'extraction. Pour faciliter cette extraction, L'extension utilise l'outil html2canvas qui permet de sélectionner et capturer la zone souhaitée dans la page web.</li>
                        </ul>
                    </li>
                    <li><b>Prétraitement des images :</b>
                        <ul>
                            <li>L'application doit inclure un prétraitement d'image pour assurer une meilleure lisibilité des données capturées. OpenCV est utilisé pour ce prétraitement, permettant d'améliorer la qualité de l'image, d'ajuster le contraste et de détecter les bordures du tableau.</li>
                        </ul>
                    </li>
                    <li><b>Reconnaissance et extraction des données :</b>
                        <ul>
                            <li>Une fois l'image prétraitée, Tesseract est utilisé pour la reconnaissance optique des caractères (OCR).</li>
                        </ul>
                    </li>
                    <li><b>Modification des données extraites :</b>
                        <ul>
                            <li>Une interface doit permettre de modifier facilement les données extraites (supprimer ou modifier les lignes/colonnes).</li>
                        </ul>
                    </li>
                    <li><b>Exportation flexible :</b>
                        <ul>
                            <li>Les données modifiées ou filtrées doivent pouvoir être exportées dans différents formats, tels que CSV et JSON.</li>
                        </ul>
                    </li>
                    <li><b>Gestion des formats de tableaux divers :</b>
                        <ul>
                            <li>L'extension doit être capable de traiter plusieurs types de tableaux HTML, y compris ceux avec des styles personnalisés ou des structures imbriquées.</li>
                        </ul>
                    </li>
                </ul>
                
            <h3>Besoins Non Fonctionnels :</h3>
                <ul>
                    <li><b>Performance et rapidité :</b>
                        <ul>
                            <li>L'extension doit fonctionner rapidement.</li>
                        </ul>
                    </li>
                    <li><b>Facilité d'utilisation :</b>
                        <ul>
                            <li>Aucune compétence technique ne doit être requise pour utiliser l'extension. L'interface doit être simple et intuitive, permettant à l'utilisateur de gérer toutes les fonctionnalités (sélection, modification, exportation) sans difficulté.</li>
                            <li>Un système d'aperçu des données doit être proposé avant l'exportation.</li>
                        </ul>
                    </li>
                    <li><b>Maintenance et évolutivité :</b>
                        <ul>
                            <li>Le projet doit être conçu de manière modulaire, facilitant l'ajout de nouvelles fonctionnalités ou l'intégration avec d'autres systèmes à l'avenir sans nécessiter de changements importants dans l'architecture existante.</li>
                        </ul>
                    </li>
                </ul>
        </section>

        <section class="content-wrapper">
            <h2>Infrastructure</h2>
            <ul>
                <li><b>Backend</b>: Le backend de l'application est développé en Python, utilisant le framework FastAPI pour la création du REST API.
                </li>
                <li><b>Frontend</b>: Le frontend de l'application est développé en React, permettant une interface utilisateur interactive et réactive.
                </li>
                <li><b>Traitement d'image et extraction des données</b>: Le traitement d'image et l'extraction des données sont réalisés en utilisant les bibliothèques OpenCV et Tesseract.
                </li>
                <li><b>Manipulation des données</b>: La manipulation des données extraites est effectuée en utilisant la bibliothèque Pandas, permettant un traitement efficace des données tabulaires.
                </li>
            </ul>

        <section class="content-wrapper progress-section">
            <header class="progress-section-header">
                <h2 style="font-size: 3.3em; font-weight: 800;">Rapport d'avancement</h2>
                <ul class="bare-list phases">
                    <li class="phase fit-content current" title="Exigences & Analyse">Exigences & Analyse</li>
                    <li class="phase fit-content" title="Prototypage & Conception">Prototypage & Conception</li>
                    <li class="phase fit-content" title="Implémentation: Infrastructure & Application">Implémentation: Infrastructure & Application</li>
                    <li class="phase fit-content" title="Validation">Validation</li>
                </ul>
                <div class="timeline"></div>
            </header>
          
            <section class="week">
                <header class="week-header">
                    <h3 class="week-title">Semaine 1 &ndash;
                        <time datetime="2024-09-09">Lundi 9 septembre 2024</time>
                    </h3>
                    <p>Ouverture de projet & Élaboration des exigences</p>
                </header>
                <div class="week-content">
                    <h4 class="title">Objectifs</h4>
                    <ul>
                        <li>Prendre en main les outils qui seront utilisés pour le projet</li>
                        <li>Produire une première version de l'échéancier</li>
                        <li>Déterminer les exigences du projet</li>
                        <li>Étudier le domaine, les notions et outils envisagés pour le projet</li>
                    </ul>

                    <h4 class="title">Réalisations</h4>
                    <ul>
                        <li>Introduction du projet</li>
                        <li>Rédaction d'une description détaillée du projet: Voir ci haut</li>
                        <li>Étude des solutions déjà présentes sur le marché et qui ressemblent à notre projet pour évaluer la valeur ajoutée:
                            <ul>
                                <li>Table Capture: extension web qui traite le code html de la page pour extraire le tableau<br>
                                    Limitation: ne fonctionne pas avec les tableaux générés dynamiquement par JavaScript ou bien par la manipulation du CSS
                                </li>
                                <li>Web Scraper: extension web<br>
                                    Limitation: Requiert une configuration plus complexe et n'offre pas une interface simple pour la sélection de données spécifiques.
                                </li>
                                <li>Tabula: application desktop<br>
                                    Limitation: Fonctionne uniquement avec des fichiers PDF, pas directement avec des pages web ou des captures d'écran.
                                </li>
                            </ul>
                        </li>
                        <li>Recherche et analyse des technologies que l'on peut utiliser dans la réalisation du projet: Découvrir les outils qu'on peut utiliser et tester</li>
                    </ul>

                    <h4 class="title">Notes</h4>
                    <p></p>
                </div>
            </section>

            <section class="week">
                <header class="week-header">
                    <h3 class="week-title">
                        Semaine 2 &ndash;
                        <time datetime="2024-09-16">Lundi 16 septembre 2024</time>
                    </h3>
                    <p>Analyse des exigences & 1ère architecture du projet</p>
                </header>
                <div class="week-content">
                    <h4 class="title">Objectifs</h4>
                    <ul>
                        <li>Finaliser les exigences du projet</li>
                        <li>Élaborer une première architecture du projet</li>
                    </ul>

                    <h4 class="title">Réalisations</h4>
                    <ul>
                        <li>Besoins fonctionnelles et non fonctionnelles: Voir ci haut</li>
                        <li>Élaboration de la première architecture du projet
                            <img src="images/architecture.png" alt="Architecture du projet" height="500" width="600">
                        </li>

                        <li>Continuer l'étude des outils et technologies qu'on va utiliser dans le projet:
                            <ul>
                                <li>Fast API, OpenCV, Tesseract, Pandas, React...</li>
                            </ul>
                        </li>
                    </ul>

                    <h4 class="title">Notes</h4>
                    <p>L'architecture du projet que je viens de définir n'est pas figée. Elle servira de base pour commencer le travail, et nous continuerons à la raffiner ou la modifier au fur et à mesure de l'avancement du projet.</p>
                    <br>
                    <p>J'ai également commencé à réfléchir à l'interface utilisateur (UI).</p>
                </div>
            </section>

            <section class="week">
                <header class="week-header">
                    <h3 class="week-title">
                        Semaine 3 &ndash;
                        <time datetime="2024-09-23">Lundi 23 septembre 2024</time>
                    </h3>
                    <p>Analyse des outils de capture d'écran & Démarrage du backend & Développement d'une extension "Hello World"</p>
                </header>
                <div class="week-content">
                    <h4 class="title">Objectifs</h4>
                    <ul>
                        <li>Étudier les outils de capture d'écran</li>
                        <li>Démarrer le développement du backend</li>
                        <li>Créer une extension "Hello World" pour tester et découvrir comment ça marche</li>
                    </ul>

                    <h4 class="title">Réalisations</h4>
                    <ul>
                        <li>Création d'une extension "hello world" et test sur chrome extensions en utilisant le "developer mode"</li>
                        <li>Étude des outils de capture d'écran:
                            <ul>
                                <li>html2canvas : C'est une bibliothèque JavaScript qui permet de capturer le contenu d'une page web en le "dessinant" sur un canvas HTML5 (càd elle manipule du contenu html et css).J'ai créé une page de démonstration pour tester cette technique sur différents types de tableaux: des tableaux HTML et des tableaux sous forme d'image. Bien qu'efficace dans de nombreux cas, html2canvas présente quelques limitations, notamment avec le contenu généré dynamiquement avec Js et les images hébergées sur des domaines externes (je ne suis pas arrivé à reproduire ces cas limites mais j'ai cherché en ligne et j'ai trouvé qu'ils existent).
                                </li>
                                <li>Autres méthodes : do-to-image, API de capture d'écran sur Chrome et d'autres projets random sur github. Ces alternatives se sont avérées soit incomplètes, soit nécessitant des permissions supplémentaires, ce qui pourrait nuire à l'expérience utilisateur.</li>
                            </ul>
                            En conclusion, je pense que c'est mieux de commencer avec html2canvas pour sa facilité d'utilisation et sa large compatibilité. Si des problèmes de performance se manifestent vers la fin du projet, nous envisagerons soit de passer à un autre outil, soit de modifier la logique du projet, par exemple en optant pour une approche de glisser-déposer d'image, de téléchargement d'image...
                        </li>
                    </ul>

                    <h4 class="title">Notes</h4>
                    <p>Je n'ai pas vraiment commencé le développement du backend, car j'ai passé la majorité de mon temps à tester et évaluer les différents outils de capture d'écran. Cependant, je me suis un peu familiarisé avec FastAPI, j'ai étudié sa documentation, réalisé quelques tutoriels de base, et commencé à planifier la structure de notre API.</p>
                </div>
            </section>

            <section class="week">
                <header class="week-header">
                    <h3 class="week-title">
                        Semaine 4 et 5&ndash;
                        <time datetime="2024-09-30">Lundi 30 septembre 2024 & Lundi 7 octobre 2024</time>
                    </h3>
                    <p>Script du traitement d'image</p>
                </header>
                <div class="week-content">
                    <h4 class="title">Objectifs</h4>
                    <ul>
                        <li>Commencer par apprendre les outils qu'on va utiliser du côté serveur pour faire le traitement d'image</li>
                        <li>Créer un script qui prend un tableau en image en entrée et renvoie un array 2D</li>
                        <li>Penser au UI: Est-ce qu'on a vraiment besoin d'utiliser React? et comment on va placer l'extension dans la page web?</li>
                    </ul>

                    <h4 class="title">Réalisations</h4>
                    <ul>
                        <li>
                            Commencer par apprendre les outils qu'on va utiliser du côté serveur pour faire le traitement d'image.
                            <ul>
                                <li>OpenCV: C'est une bibliothèque open source de vision par ordinateur et de traitement d'image. Elle fournit des outils pour manipuler des images et des vidéos. J'ai commencé à apprendre les bases de OpenCV et à réaliser quelques tutoriels pour me familiariser avec les fonctionnalités de base.</li>
                                <li>Tesseract: C'est un moteur de reconnaissance optique de caractères (OCR) open source. Il permet de convertir des images de texte en texte brut. J'ai également commencé à apprendre les bases de Tesseract et à réaliser quelques tutoriels pour comprendre comment il fonctionne.</li>
                            </ul>
                        </li>
                        <li>Créer un script qui prend en entrée une image d'un tableau et renvoie un array 2D: C'est une première version du script qui prend une image en entrée, la traite avec OpenCV et Tesseract, et renvoie un array 2D représentant le tableau extrait. J'ai réalisé quelques tests avec des images de tableaux simples.</li>
                    </ul>
                    
                    <h4 class="title">Notes</h4>
                    <p>Cette première version du script marche bien dans la plupart des images de tests, mais jusqu'à maintenant on 2 problèmes:
                        <ul>
                            <li>La fonction findContours retourne aussi le contour externe du tableau donc il faut trouver une fonciton qui filtre ces contours et élimine les conteurs externes, j'ai jusqu'à maintenant 3 solutions à discuter:
                                <br>
                                - skip le premier contours à l'index i=0 car il est le contour externe le plus grand. Elle fonctionne dans notre cas car avec RETR_TREE les contours sont organisés dans une hiérarchie parent-enfant basée sur leur imbrication dans l'image (Il se peut que cette méthode ne marche pas bien si on a beacoup de tableau imbriqué dans l'image)
                                <br>
                                - faire un seuil des cases, par exemple 1000 &lt; area de la case &lt; 5000. C'est presque hardcoded car il se peut qu'on ait un tableau plus petit ou plus grand
                                <br>
                                - trier les contours dans l'ordre croissant de leur area et supprimer le plus grand car dans ce cas on est sur qu'il est le conteur externe 
                            </li>
                            <li>Problème de detection des 3 premieres cases dans test.png</li>
                        </ul>
                    </p>
        </section>
        <section class="week">
            <header class="week-header">
                <h3 class="week-title">
                    Semaine 6 et 7&ndash;
                    <time datetime="2024-10-14">Lundi 14 octobre 2024 & Lundi 21 octobre 2024</time>
                </h3>
                <p>Amélioration du script du traitement d'image</p>
            </header>
            <div class="week-content">
                <h4 class="title">Objectifs</h4>
                <ul>
                    <li>Régler le problème de area &gt; 5000 qui dépend de la taille des cellules du tableau: il faut trouver une façon de généraliser ça sur n'importe quel tableau.</li>
                    <li>Régler le problème du seuil pour passer à la prochaine ligne dans le tableau: on a 20 pixels mais il faut generaliser.</li>
                    <li>Régler le problème des 3 premières cases qui ne se détectent pas dans l'image test.png</li>
                    <li>Faire des tests diversifiés.</li>
                </ul>

                <h4 class="title">Réalisations</h4>
                <ul>
                    <li>Régler le problème de area &gt; 5000 qui dépend de la taille des cellules du tableau: j'ai trouvé une solution qui se base sur la hierarchie du tableau. <br> cv2.findContours(dilated, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE) retourne la hiérarchie du tableau en considérant que le grand contour externe du tableau est le parent de toutes les autres cases. On détecte ce contour et après on filtre les contours détectés en laissant seulement les contours enfants directs de ce contour, et on sait bien que ces contours forment les cases de notre tableau. <br>On applique un filtre de w &gt; 10 and h &gt; 10 car il se peut qu'il y ait du bruit comme des pixels qui semblent être des contours à cause du contraste ou tout autre problème. <br>Les contours restants sont des cases non valides (soit du texte ou du bruit qui sont imbriqués au 2ème niveau).</li>
                    <li>Régler le problème du seuil pour passer à la prochaine ligne dans le tableau: j'ai créé une fonction resize_image qui consiste à généraliser la forme des images avec une largeur de 2000 pixels. La hauteur sera calculée selon la proportion dans l'image originale pour préserver les proportions. Donc maintenant on sait bien qu'on a au moins 20 pixels entre chaque ligne.</li>
                    <li>Régler le problème des 3 premières cases qui ne se détectent pas dans l'image test.png: Ce problème est causé par la qualité de l'image qui est un peu flou, après avoir resize l'image avec une interpolation cv2.INTER_AREA, ce problème n'apparait plus car le contraste augmente un peu.</li>
                </ul>
                
                <h4 class="title">Notes</h4>
                <p>Resize_image a causé un autre problème dans le cas des images très petites : quand on les agrandit, le contraste élevé crée du bruit dans les images et crée des problèmes dans la détection du texte. J'ai rencontré ce problème dans une seule image. Je vais chercher une solution à ça après.</p>
    </section>
    </main>

    <footer class="page-footer">
        <a href="https://github.com/protolabo/picky" target="_blank">Répertoire GitHub</a>
        <p>Dernière mise à jour: 28 octobre 2024</p>
    </footer>

    <script>
        const NB_WEEK = 13;
        let projetStart = new Date("2024-09-09");
        let current = (Date.now() - projetStart) / 1000 / 60 / 60 / 24 / 7;
        let progress = Math.round((current/NB_WEEK) * 100);

        let timeline = document.querySelector('.timeline');
        timeline.style.background = `linear-gradient(to right, rgb(var(--accent)) ${progress}%, #d5d5d5 0%)`;
    </script>
</body>

</html>
